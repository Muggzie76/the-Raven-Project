function toggleBentoItemHighlight(e){document.querySelectorAll(".bento-item").forEach((t=>{t!==e&&(t.classList.remove("highlighted"),t.setAttribute("aria-pressed","false"))}));const t=e.classList.toggle("highlighted");if(e.setAttribute("aria-pressed",t),t){e.focus();const t=document.createElement("span");t.classList.add("ripple-effect"),e.appendChild(t);const s=e.getBoundingClientRect();t.style.width=t.style.height=Math.max(s.width,s.height)+"px",setTimeout((()=>{t.remove()}),600)}}async function loadBlogPosts(){try{const e=await fetch("articles/summary.json"),t=await e.json(),s=document.querySelector(".blog-grid");s&&(s.setAttribute("aria-busy","true"),t.forEach((e=>{const t=document.createElement("div");t.className="blog-post",t.innerHTML=`\n                    <h3><a href="articles/${e.slug}.html">${e.title}</a></h3>\n                    <div class="date">${e.date}</div>\n                    <div class="excerpt">${e.excerpt}</div>\n                    <a href="articles/${e.slug}.html" class="read-more" aria-label="Read more about ${e.title}">Read More</a>\n                `,s.appendChild(t)})),s.setAttribute("aria-busy","false"))}catch(e){console.error("Error loading blog posts:",e);const t=document.querySelector(".blog-grid");t&&(t.setAttribute("aria-busy","false"),t.innerHTML='<div class="error-message" role="alert">\n                <h3>Error Loading Posts</h3>\n                <p>There was a problem loading the blog posts. Please try again later.</p>\n                <button onclick="loadBlogPosts()">Retry</button>\n            </div>')}}document.querySelector(".mobile-menu").addEventListener("click",(()=>{document.querySelector(".nav-links").classList.toggle("active"),document.querySelector(".mobile-menu").classList.toggle("active"),document.body.classList.toggle("menu-open")})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.documentElement,t=document.getElementById("theme-toggle");function s(s){"light"===s?(e.classList.add("light-theme"),t.setAttribute("aria-label","Switch to dark theme")):(e.classList.remove("light-theme"),t.setAttribute("aria-label","Switch to light theme"))}s(localStorage.getItem("theme")||"dark"),t.addEventListener("click",(()=>{const t="dark"===(e.classList.contains("light-theme")?"light":"dark")?"light":"dark";s(t),localStorage.setItem("theme",t)}));const o=window.matchMedia("(prefers-color-scheme: dark)");localStorage.getItem("theme")||(s(o.matches?"dark":"light"),localStorage.setItem("theme",o.matches?"dark":"light")),o.addEventListener("change",(e=>{localStorage.getItem("theme")||s(e.matches?"dark":"light")}))})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".bento-item").forEach(((e,t)=>{e.classList.add("loading"),setTimeout((()=>{e.classList.remove("loading")}),300+150*t),e.addEventListener("click",(()=>{toggleBentoItemHighlight(e)})),e.addEventListener("keydown",(t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),toggleBentoItemHighlight(e))})),e.addEventListener("focus",(()=>{e.classList.add("focused")})),e.addEventListener("blur",(()=>{e.classList.remove("focused")})),e.addEventListener("mouseenter",(()=>{const t=e.querySelector("img");t&&(t.style.transform="scale(1.1)")})),e.addEventListener("mouseleave",(()=>{const t=e.querySelector("img");t&&(t.style.transform="")}))}))})),document.addEventListener("DOMContentLoaded",(()=>{if(loadBlogPosts(),"IntersectionObserver"in window){const e=document.querySelectorAll('img[loading="lazy"]'),t=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const s=e.target,o=s.closest("picture");if(o){o.querySelectorAll("source").forEach((e=>{e.dataset.srcset&&(e.srcset=e.dataset.srcset,delete e.dataset.srcset)}))}s.dataset.src&&(s.src=s.dataset.src,delete s.dataset.src),setTimeout((()=>{s.classList.add("loaded")}),100),t.unobserve(s)}}))}),{rootMargin:"50px 0px",threshold:.01});e.forEach((e=>{e.classList.add("loading"),t.observe(e)}))}else{setTimeout((()=>{document.querySelectorAll('img[loading="lazy"]').forEach((e=>{e.dataset.src&&(e.src=e.dataset.src,delete e.dataset.src),e.classList.add("loaded")}))}),1e3)}const e=document.querySelector(".header-wrapper"),t=document.querySelector(".announcement-wrapper");let s=t?t.offsetHeight:0,o=window.scrollY;window.addEventListener("scroll",(()=>{const t=window.scrollY;t>s?(e.classList.add("sticky"),t<o?e.classList.remove("header-hidden"):t>o&&t>s+50&&e.classList.add("header-hidden")):e.classList.remove("sticky","header-hidden"),o=t}));const a=document.querySelector(".banner-close");a&&a.addEventListener("click",(()=>{t.style.display="none",s=0,e.classList.remove("sticky","header-hidden"),e.style.top="0",sessionStorage.setItem("bannerClosed","true")})),"true"===sessionStorage.getItem("bannerClosed")&&t&&(t.style.display="none",s=0,e.style.top="0");document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(t=>{const s=e.getAttribute("href");if("#"===s)return;const o=document.querySelector(s);if(o){t.preventDefault();const e=document.querySelector(".header-wrapper").offsetHeight,a=o.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:a,behavior:"smooth"}),history.pushState(null,null,s),o.setAttribute("tabindex","-1"),o.focus({preventScroll:!0})}}))})),window.location.hash&&setTimeout((()=>{const e=document.querySelector(window.location.hash);if(e){const t=document.querySelector(".header-wrapper").offsetHeight,s=e.getBoundingClientRect().top+window.pageYOffset-t;window.scrollTo({top:s,behavior:"smooth"}),e.setAttribute("tabindex","-1"),e.focus({preventScroll:!0})}}),100);const n=document.querySelector(".mobile-menu"),r=document.querySelector(".nav-links");n&&r&&(n.addEventListener("click",(()=>{n.classList.toggle("active"),r.classList.toggle("active");const e=n.classList.contains("active");if(n.setAttribute("aria-expanded",e),document.body.classList.toggle("menu-open",e),e){const e=r.querySelector("a");e&&setTimeout((()=>{e.focus()}),100)}})),n.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n.click())})),r.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(()=>{n.classList.remove("active"),r.classList.remove("active"),document.body.classList.remove("menu-open"),n.setAttribute("aria-expanded",!1),setTimeout((()=>{n.focus()}),100)}))})),n.setAttribute("aria-label","Toggle mobile menu"),n.setAttribute("aria-expanded",!1),n.setAttribute("aria-controls","nav-links"),r.id="nav-links",r.addEventListener("keydown",(e=>{if("Escape"===e.key)return void n.click();const t=r.querySelectorAll('a, button, [tabindex="0"]'),s=t[0],o=t[t.length-1];"Tab"!==e.key||e.shiftKey||document.activeElement!==o||(e.preventDefault(),s.focus()),"Tab"===e.key&&e.shiftKey&&document.activeElement===s&&(e.preventDefault(),o.focus())})));const i=document.createElement("a");i.href="#main-content",i.className="skip-to-content",i.textContent="Skip to main content",document.body.insertBefore(i,document.body.firstChild)}));